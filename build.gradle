plugins {
  id 'java' // for "runtimeOnly" dependency scope
  id 'org.owasp.dependencycheck' version '11.1.1'
}

repositories {
  mavenCentral()
}

dependencies {
  runtimeOnly 'org.gwtproject:gwt-dev:2.12.1'
}

dependencyCheck {
  // The most important classpath is the set of JARs
  // we have in production WAR.
  scanConfigurations = ['runtimeClasspath']

  if(project.hasProperty('NVD_API_KEY')) {
    nvd.apiKey = project.property('NVD_API_KEY')
  }
}

// Just wanted to see how many JAR files does gwt-dev really pull.
// This task is not really related to the vulnerability report.
tasks.register('libs', Copy) {
  from configurations.runtimeClasspath
  into layout.projectDirectory.dir('libs')
}
